{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Viane\\\\OneDrive\\\\Desktop\\\\vetLogin\\\\vetlogin_react\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, createContext } from \"react\";\nimport { setToken, getToken, removeToken } from \"../api/token\";\nimport { useUser } from \"../hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  auth: undefined,\n  login: () => null,\n  logout: () => null\n});\nexport function AuthProvider(props) {\n  _s();\n  const {\n    children\n  } = props;\n  const [auth, setAuth] = useState(undefined);\n  const {\n    getMe\n  } = useUser();\n  useEffect(() => {\n    (async () => {\n      const token = getToken();\n      if (token) {\n        const me = await getMe(token);\n        setAuth({\n          token,\n          me\n        });\n      } else {\n        setAuth(null);\n      }\n    })();\n  }, []);\n  const login = async token => {\n    setToken(token);\n    const me = await getMe(token);\n    setAuth({\n      token,\n      me\n    });\n  };\n  const logout = () => {\n    if (auth) {\n      removeToken();\n      setAuth(null);\n    }\n  };\n  const valueContext = {\n    auth,\n    login,\n    logout\n  };\n  if (auth === undefined) return null;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: valueContext,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"RGM/rL0uw8XeFcXO/ZdEMDGR26E=\", false, function () {\n  return [useUser];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","useEffect","createContext","setToken","getToken","removeToken","useUser","AuthContext","auth","undefined","login","logout","AuthProvider","props","children","setAuth","getMe","token","me","valueContext"],"sources":["C:/Users/Viane/OneDrive/Desktop/vetLogin/vetlogin_react/src/context/AuthContext.js"],"sourcesContent":["import React, { useState, useEffect, createContext } from \"react\";\r\nimport { setToken, getToken, removeToken } from \"../api/token\";\r\nimport { useUser } from \"../hooks\";\r\n\r\nexport const AuthContext = createContext({\r\n  auth: undefined,\r\n  login: () => null,\r\n  logout: () => null,\r\n});\r\n\r\nexport function AuthProvider(props) {\r\n  const { children } = props;\r\n  const [auth, setAuth] = useState(undefined);\r\n  const { getMe } = useUser();\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const token = getToken();\r\n      if (token) {\r\n        const me = await getMe(token);\r\n        setAuth({ token, me });\r\n      } else {\r\n        setAuth(null);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const login = async (token) => {\r\n    setToken(token);\r\n    const me = await getMe(token);\r\n    setAuth({ token, me });\r\n  };\r\n\r\n  const logout = () => {\r\n    if (auth) {\r\n      removeToken();\r\n      setAuth(null);\r\n    }\r\n  };\r\n\r\n  const valueContext = {\r\n    auth,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  if (auth === undefined) return null;\r\n\r\n  return (\r\n    <AuthContext.Provider value={valueContext}>{children}</AuthContext.Provider>\r\n  );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,QAAQ,OAAO;AACjE,SAASC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,cAAc;AAC9D,SAASC,OAAO,QAAQ,UAAU;AAAC;AAEnC,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC;EACvCM,IAAI,EAAEC,SAAS;EACfC,KAAK,EAAE,MAAM,IAAI;EACjBC,MAAM,EAAE,MAAM;AAChB,CAAC,CAAC;AAEF,OAAO,SAASC,YAAY,CAACC,KAAK,EAAE;EAAA;EAClC,MAAM;IAAEC;EAAS,CAAC,GAAGD,KAAK;EAC1B,MAAM,CAACL,IAAI,EAAEO,OAAO,CAAC,GAAGf,QAAQ,CAACS,SAAS,CAAC;EAC3C,MAAM;IAAEO;EAAM,CAAC,GAAGV,OAAO,EAAE;EAE3BL,SAAS,CAAC,MAAM;IACd,CAAC,YAAY;MACX,MAAMgB,KAAK,GAAGb,QAAQ,EAAE;MACxB,IAAIa,KAAK,EAAE;QACT,MAAMC,EAAE,GAAG,MAAMF,KAAK,CAACC,KAAK,CAAC;QAC7BF,OAAO,CAAC;UAAEE,KAAK;UAAEC;QAAG,CAAC,CAAC;MACxB,CAAC,MAAM;QACLH,OAAO,CAAC,IAAI,CAAC;MACf;IACF,CAAC,GAAG;EACN,CAAC,EAAE,EAAE,CAAC;EAEN,MAAML,KAAK,GAAG,MAAOO,KAAK,IAAK;IAC7Bd,QAAQ,CAACc,KAAK,CAAC;IACf,MAAMC,EAAE,GAAG,MAAMF,KAAK,CAACC,KAAK,CAAC;IAC7BF,OAAO,CAAC;MAAEE,KAAK;MAAEC;IAAG,CAAC,CAAC;EACxB,CAAC;EAED,MAAMP,MAAM,GAAG,MAAM;IACnB,IAAIH,IAAI,EAAE;MACRH,WAAW,EAAE;MACbU,OAAO,CAAC,IAAI,CAAC;IACf;EACF,CAAC;EAED,MAAMI,YAAY,GAAG;IACnBX,IAAI;IACJE,KAAK;IACLC;EACF,CAAC;EAED,IAAIH,IAAI,KAAKC,SAAS,EAAE,OAAO,IAAI;EAEnC,oBACE,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAEU,YAAa;IAAA,UAAEL;EAAQ;IAAA;IAAA;IAAA;EAAA,QAAwB;AAEhF;AAAC,GAzCeF,YAAY;EAAA,QAGRN,OAAO;AAAA;AAAA,KAHXM,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}