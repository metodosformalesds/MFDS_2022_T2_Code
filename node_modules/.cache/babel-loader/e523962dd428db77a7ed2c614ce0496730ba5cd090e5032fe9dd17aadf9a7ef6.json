{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Viane\\\\OneDrive\\\\Desktop\\\\vetLogin\\\\vetlogin_react\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, createContext } from \"react\";\nimport { setToken, getToken, removeToken } from \"../api/token\";\nimport { useUser } from \"../hooks\";\n\n//useState, useEffect,\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  auth: undefined,\n  login: () => null,\n  logout: () => null\n});\nexport function AuthProvider(props) {\n  _s();\n  const {\n    children\n  } = props;\n  const [auth, setAuth] = useState(undefined);\n  const {\n    getMe\n  } = useUser();\n  useEffect(() => {\n    (async () => {\n      const token = getToken();\n      if (token) {\n        const me = await getMe(token);\n        setAuth({\n          token,\n          me\n        });\n      } else {\n        setAuth(null);\n      }\n      console.log(token);\n    })();\n  }, []);\n  const login = async token => {\n    setToken(token);\n    const me = await getMe(token);\n    setAuth({\n      token,\n      me\n    });\n  };\n  const logout = () => {\n    if (auth) {\n      removeToken();\n      setAuth(null);\n    }\n  };\n  const valueContext = {\n    auth,\n    login,\n    logout\n  };\n  if (auth === undefined) return null;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: valueContext,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProvider, \"Qe1jKnpI/WFd6h+RaOEkiFMvliw=\", false, function () {\n  return [useUser];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","useState","useEffect","createContext","setToken","getToken","removeToken","useUser","AuthContext","auth","undefined","login","logout","AuthProvider","props","children","setAuth","getMe","token","me","console","log","valueContext"],"sources":["C:/Users/Viane/OneDrive/Desktop/vetLogin/vetlogin_react/src/context/AuthContext.js"],"sourcesContent":["import React, {useState,useEffect, createContext} from \"react\";\r\nimport {setToken, getToken, removeToken} from \"../api/token\";\r\nimport {useUser} from \"../hooks\";\r\n\r\n//useState, useEffect,\r\n\r\nexport const AuthContext = createContext({\r\n    auth: undefined,\r\n    login: () => null,\r\n    logout: ()=> null,\r\n});\r\n\r\nexport function AuthProvider(props){\r\n    const {children}=props;\r\n    const [auth, setAuth] = useState(undefined);\r\n    const {getMe}=useUser();\r\n\r\n    useEffect(() => {\r\n      (async()=>{\r\n        const token= getToken();\r\n        if(token){\r\n            const me =await getMe(token);\r\n            setAuth({token,me});\r\n        } else{\r\n            setAuth(null)\r\n        }\r\n        console.log(token);\r\n      })();\r\n    }, [])\r\n    \r\n\r\n    const login=async(token)=>{\r\n        setToken(token);\r\n        const me=await getMe(token);\r\n        setAuth({token, me});\r\n        \r\n    };\r\n    const logout=()=>{\r\n        if(auth){\r\n            removeToken();\r\n            setAuth(null);\r\n        }\r\n    }\r\n\r\n    const valueContext={\r\n        auth,\r\n        login,\r\n        logout,\r\n    };\r\n\r\n    if(auth=== undefined) return null;\r\n\r\n    return(\r\n        <AuthContext.Provider value={valueContext}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,EAACC,SAAS,EAAEC,aAAa,QAAO,OAAO;AAC9D,SAAQC,QAAQ,EAAEC,QAAQ,EAAEC,WAAW,QAAO,cAAc;AAC5D,SAAQC,OAAO,QAAO,UAAU;;AAEhC;AAAA;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC;EACrCM,IAAI,EAAEC,SAAS;EACfC,KAAK,EAAE,MAAM,IAAI;EACjBC,MAAM,EAAE,MAAK;AACjB,CAAC,CAAC;AAEF,OAAO,SAASC,YAAY,CAACC,KAAK,EAAC;EAAA;EAC/B,MAAM;IAACC;EAAQ,CAAC,GAACD,KAAK;EACtB,MAAM,CAACL,IAAI,EAAEO,OAAO,CAAC,GAAGf,QAAQ,CAACS,SAAS,CAAC;EAC3C,MAAM;IAACO;EAAK,CAAC,GAACV,OAAO,EAAE;EAEvBL,SAAS,CAAC,MAAM;IACd,CAAC,YAAS;MACR,MAAMgB,KAAK,GAAEb,QAAQ,EAAE;MACvB,IAAGa,KAAK,EAAC;QACL,MAAMC,EAAE,GAAE,MAAMF,KAAK,CAACC,KAAK,CAAC;QAC5BF,OAAO,CAAC;UAACE,KAAK;UAACC;QAAE,CAAC,CAAC;MACvB,CAAC,MAAK;QACFH,OAAO,CAAC,IAAI,CAAC;MACjB;MACAI,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;IACpB,CAAC,GAAG;EACN,CAAC,EAAE,EAAE,CAAC;EAGN,MAAMP,KAAK,GAAC,MAAMO,KAAK,IAAG;IACtBd,QAAQ,CAACc,KAAK,CAAC;IACf,MAAMC,EAAE,GAAC,MAAMF,KAAK,CAACC,KAAK,CAAC;IAC3BF,OAAO,CAAC;MAACE,KAAK;MAAEC;IAAE,CAAC,CAAC;EAExB,CAAC;EACD,MAAMP,MAAM,GAAC,MAAI;IACb,IAAGH,IAAI,EAAC;MACJH,WAAW,EAAE;MACbU,OAAO,CAAC,IAAI,CAAC;IACjB;EACJ,CAAC;EAED,MAAMM,YAAY,GAAC;IACfb,IAAI;IACJE,KAAK;IACLC;EACJ,CAAC;EAED,IAAGH,IAAI,KAAIC,SAAS,EAAE,OAAO,IAAI;EAEjC,oBACI,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAEY,YAAa;IAAA,UACrCP;EAAQ;IAAA;IAAA;IAAA;EAAA,QACU;AAE/B;AAAC,GA7CeF,YAAY;EAAA,QAGVN,OAAO;AAAA;AAAA,KAHTM,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}